<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Game Setup</title>
    <script>
        function addPlayer() {
            const playerList = document.getElementById("playerList");
            const newPlayer = document.createElement("div");
            newPlayer.classList.add("playerRow");
            newPlayer.innerHTML = `
                <input type="text" name="players" placeholder="Player Name" required />
                <button type="button" onclick="removePlayer(this)">Remove</button>
            `;
            playerList.appendChild(newPlayer);
        }

        function removePlayer(button) {
            button.parentElement.remove();
        }

        function addRule() {
            const ruleList = document.getElementById("ruleList");
            const newRule = document.createElement("div");
            newRule.classList.add("ruleRow");
            newRule.innerHTML = `
                <input type="text" name="rules" placeholder="Rule Name" required />
                <input type="number" name="points" placeholder="Points" required />
                <button type="button" onclick="removeRule(this)">Remove</button>
            `;
            ruleList.appendChild(newRule);
        }

        function removeRule(button) {
            button.parentElement.remove();
        }
    </script>
</head>
<body>

<h2>Game Setup</h2>

<form th:action="@{/setup}" method="post" th:object="${gameSetupRequest}">
    <label for="gameName">Game Name:</label>
    <input type="text" id="gameName" name="gameName" th:value="${gameSetupRequest.gameName}" required /><br><br>

    <h3>Players</h3>
    <div id="playerList">
        <div class="playerRow">
            <input type="text" name="players" placeholder="Player Name" required />
            <button type="button" onclick="removePlayer(this)">Remove</button>
        </div>
    </div>
    <button type="button" onclick="addPlayer()">Add Player</button>

    <h3>Rules</h3>
    <div id="ruleList">
        <div class="ruleRow">
            <input type="text" name="rules" placeholder="Rule Name" required />
            <input type="number" name="points" placeholder="Points" required />
            <button type="button" onclick="removeRule(this)">Remove</button>
        </div>
    </div>
    <button type="button" onclick="addRule()">Add Rule</button>

    <br><br>
    <button type="submit">Submit Game Setup</button>
</form>

<div th:if="${gameSetupRequest != null}">
    <br>
    <a href="/play" class="playButton">Start Game</a>
</div>

</body>
</html>
